<head>
    <meta charset="utf8" />
    <title>{% if page.title %}{{ page.title }} | {% endif %}{{ site.title }}</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <link href="{{ page.url | absolute_url }}" rel="canonical" />
    <link href="{{ '/assets/favicon.png' | relative_url }}" rel="icon" type="image/png" />
    <link href="https://fonts.googleapis.com/css?family=Noto+Sans+JP" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=M+PLUS+Rounded+1c" rel="stylesheet">
    <link rel="stylesheet" href="{{ '/assets/style.css' | relative_url }}" />
    {% if jekyll.environment == 'production' %}
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-135467084-1"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-135467084-1');
    </script>
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
        (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-4465411623454669",
            enable_page_level_ads: true
        });
    </script>
    {% endif %}

    <script src="{{ '/assets/gdrive.js' | relative_url }}"></script>
    <script src="https://unpkg.com/mermaid@8.0.0/dist/mermaid.min.js"></script>
    <script async defer>
        const mermaiding = async function() {
            const elements = document.querySelectorAll("pre>code.language-mermaid");
            for (let i = 0; i < elements.length; i++) {
                const e = elements[i];
                const pre = e.parentElement;
                const replace = function(graph) {
                    if (pre.getAttribute('data-style') == 'details') {
                        const details = document.createElement('details');
                        details.className = 'mermaid';
                        details.setAttribute('data-processed', 'true');

                        if (pre.getAttribute('title')) {
                            const summary = document.createElement('summary');
                            summary.textContent = pre.getAttribute('title');
                            details.appendChild(summary)
                        }

                        const elem = document.createElement('div');
                        elem.innerHTML = graph;
                        details.appendChild(elem);
                        pre.parentElement.replaceChild(details, pre);
                    }else{
                        const elem = document.createElement('div');
                        elem.innerHTML = graph;
                        elem.className = 'mermaid';
                        elem.setAttribute('data-processed', 'true');
                        if (pre.getAttribute('title')) {
                            elem.setAttribute('title', pre.getAttribute('title'));
                        }
                        pre.parentElement.replaceChild(elem, pre);
                    }
                }
                mermaid.mermaidAPI.render('id' + i, e.textContent, replace);
            }
        }

        if (document.readyState == 'interactive' || document.readyState == 'complete') {
            mermaiding();
        }else{
            document.addEventListener("DOMContentLoaded", mermaiding);
        }
    </script>
</head>
